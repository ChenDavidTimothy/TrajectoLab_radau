{# Corrected _templates/sidebar-nav-bs.html #}
<div class="bd-sidebar-primary bd-sidebar">
  <div class="sidebar-header-items sidebar-primary__section">
  </div>
  <div class="sidebar-primary-items__start sidebar-primary__section">
    <div class="sidebar-primary-item">
      {%- for sidebartemplate in sidebars %}
        {%- if sidebartemplate in ('search-button-field.html', 'search-field.html') %}
          {% include sidebartemplate %}
        {%- endif %}
      {%- endfor %}
    </div>
    <div class="sidebar-primary-item">
      <nav class="bd-docs-nav bd-links"
           aria-label="{{ _('Section Navigation') }}">
        <p class="bd-links__title" role="heading" aria-level="1">
          {{ _("Section Navigation") }}
        </p>
        <div class="bd-toc-item navbar-nav">
          {# START: Your custom logic is inserted here #}
          {% if pagename.startswith(("api", "examples")) %}
            {{- generate_toctree_html("sidebar", maxdepth=1, collapse=True, includehidden=True, titles_only=True) -}}
          {% else %}
            {{- generate_toctree_html("sidebar", maxdepth=2, collapse=True, includehidden=False, titles_only=True) -}}
          {% endif %}
          {# END: Your custom logic #}
        </div>
      </nav>
    </div>
  </div>
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  <div id="rtd-footer-container"></div>
</div>
